/* CRITICAL SIDEBAR FIX - Force proper layout and prevent overlapping */

/* Force horizontal text rendering - fix for vertical text issue */
* {
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
}

/* Target specific sidebar components */
.theme-doc-sidebar-menu,
.menu__list,
.menu__link,
.menu__list-item,
.menu__list-item-collapsible,
nav,
aside,
.table-of-contents,
.table-of-contents__link,
.table-of-contents__link span,
.toc-highlight,
.theme-doc-toc-desktop,
.theme-doc-toc-mobile,
.theme-doc-sidebar-container,
.navbar-sidebar,
.navbar-sidebar__items,
[class*="sidebar"],
[class*="menu"],
[class*="toc"],
.docSidebarContainer,
[class*="tableOfContents"] {
  display: block !important;
  text-orientation: mixed !important;
  writing-mode: horizontal-tb !important;
  letter-spacing: normal !important;
  text-align: left !important;
  white-space: normal !important;
  word-break: normal !important;
  transform: none !important;
  direction: ltr !important;
  -webkit-transform: none !important;
  -ms-transform: none !important;
  font-size: inherit !important;
  line-height: 1.5 !important;
}

/* Layout structure fixes */
.navbar {
  position: sticky !important;
  top: 0 !important;
  z-index: 200 !important;
}

.main-wrapper {
  display: flex !important;
  flex-direction: row !important;
  width: 100% !important;
  max-width: 100% !important;
  overflow-x: hidden !important;
}

/* Left sidebar - using percentage width */
.theme-doc-sidebar-container {
  width: 18% !important; /* Default - will be overridden by media queries */
  max-width: 18% !important;
  min-width: 18% !important;
  margin-right: 0 !important;
  position: sticky !important;
  top: var(--ifm-navbar-height, 60px) !important;
  height: calc(100vh - var(--ifm-navbar-height, 60px)) !important;
  overflow-y: auto !important;
  z-index: 100 !important;
  flex: 0 0 auto !important;
  background-color: var(--ifm-background-surface-color) !important;
  border-right: 1px solid var(--ifm-toc-border-color) !important;
}

/* Main content container */
.docMainContainer {
  flex: 1 1 auto !important;
  width: 0 !important; /* Force flexbox sizing */
  min-width: 0 !important;
  max-width: none !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  overflow-x: hidden !important;
}

/* Main content page wrapper */
.docPage {
  display: flex !important;
  width: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Right sidebar wrapper */
.docSidebarContainer_src-theme-DocPage-Layout-Sidebar-styles-module,
.docSidebarContainer {
  display: block !important;
  flex: 0 0 auto !important;
  width: 18% !important; /* Match left sidebar */
  margin: 0 !important;
}

/* Main document content area */
.docItemContainer {
  flex: 1 1 auto !important;
  min-width: 0 !important; /* Required for proper flexbox behavior */
  max-width: none !important;
  overflow-x: hidden !important;
  padding: 0 1.5rem !important;
}

/* Mobile fixes */
@media (max-width: 996px) {
  /* Mobile sidebar positioning */
  .theme-doc-sidebar-container {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    bottom: 0 !important;
    transform: translateX(-100%) !important;
    transition: transform 0.3s ease !important;
    z-index: 9999 !important;
    width: 85% !important; /* Take most of screen width on mobile */
    max-width: 320px !important; /* But cap at reasonable size */
    height: 100% !important;
  }
  
  /* When sidebar is shown */
  .theme-doc-sidebar-container.menu--show {
    transform: translateX(0) !important;
  }
  
  /* Make sure content takes full width */
  .docMainContainer,
  .docPage,
  .docItemContainer {
    max-width: 100% !important;
    width: 100% !important;
    margin: 0 !important;
    overflow-x: hidden !important;
  }
  
  /* Overlay backdrop when sidebar is open */
  .overlay-container {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background-color: rgba(0, 0, 0, 0.5) !important;
    z-index: 9000 !important;
  }
}

/* Medium screens (tablets) */
@media (min-width: 997px) and (max-width: 1200px) {
  .theme-doc-sidebar-container,
  .docSidebarContainer_src-theme-DocPage-Layout-Sidebar-styles-module,
  .docSidebarContainer {
    width: 22% !important;
    max-width: 22% !important;
    min-width: 22% !important;
  }
}

/* Large screens */
@media (min-width: 1201px) {
  .theme-doc-sidebar-container,
  .docSidebarContainer_src-theme-DocPage-Layout-Sidebar-styles-module,
  .docSidebarContainer {
    width: 18% !important;
    max-width: 18% !important;
    min-width: 18% !important;
  }
}

/* Extra large screens */
@media (min-width: 1600px) {
  .theme-doc-sidebar-container,
  .docSidebarContainer_src-theme-DocPage-Layout-Sidebar-styles-module,
  .docSidebarContainer {
    width: 15% !important;
    max-width: 15% !important;
    min-width: 15% !important;
  }
}

/* Right sidebar TOC fix */
.theme-doc-toc-desktop .table-of-contents {
  overflow-y: auto !important;
  max-height: calc(100vh - var(--ifm-navbar-height) - 2rem) !important;
  position: sticky !important;
  top: calc(var(--ifm-navbar-height) + 1rem) !important;
}
